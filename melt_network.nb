(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     29334,        692]
NotebookOptionsPosition[     27087,        644]
NotebookOutlinePosition[     27473,        661]
CellTagsIndexPosition[     27430,        658]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Set Working Directory", "Section",
 CellChangeTimes->{{3.853413204258727*^9, 
  3.853413211080124*^9}},ExpressionUUID->"3285aa9e-73a8-4a7b-a1bc-\
0333efd5a34a"],

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  "\"\<C:\\\\Users\\\\ly0106\\\\Desktop\\\\CG_Proj\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.853409982031701*^9, 3.853409992771964*^9}, {
  3.8534132507469983`*^9, 3.8534133149182453`*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"a8590c15-c792-458a-9488-5573a1e80a66"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Import Raw data of scoba12", "Section",
 CellChangeTimes->{{3.853410751755269*^9, 3.8534107623156633`*^9}, 
   3.8534111301356397`*^9},ExpressionUUID->"78e0aa33-9652-41df-b7ed-\
0f47c926405d"],

Cell[BoxData[{
 RowBox[{"Clear", "[", "\"\<Global`*\>\"", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rawData", "=", 
   RowBox[{"Import", "[", "\"\<raw_data\\\\scoba12.xlsx\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rawData", " ", "=", " ", 
   RowBox[{"rawData", "[", 
    RowBox[{"[", 
     RowBox[{"1", ",", ";;", ",", ";;"}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"data", " ", "=", " ", 
   RowBox[{"rawData", "[", 
    RowBox[{"[", 
     RowBox[{";;", ",", 
      RowBox[{"{", 
       RowBox[{"4", ",", "5", ",", "6", ",", "10", ",", "19"}], "}"}]}], 
     "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"scaleData", " ", "=", 
   RowBox[{"Transpose", "[", 
    RowBox[{"Join", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"Transpose", "[", " ", 
         RowBox[{"rawData", "[", 
          RowBox[{"[", 
           RowBox[{";;", ",", 
            RowBox[{"{", 
             RowBox[{"4", ",", "5", ",", "6", ",", "10", ",", "19"}], "}"}]}],
            "]"}], "]"}], "]"}], "\[LeftDoubleBracket]", 
        RowBox[{"1", ";;", "3"}], "\[RightDoubleBracket]"}], "*", "10"}], ",", 
      RowBox[{
       RowBox[{"Transpose", "[", " ", 
        RowBox[{"rawData", "[", 
         RowBox[{"[", 
          RowBox[{";;", ",", 
           RowBox[{"{", 
            RowBox[{"4", ",", "5", ",", "6", ",", "10", ",", "19"}], "}"}]}], 
          "]"}], "]"}], "]"}], "\[LeftDoubleBracket]", 
       RowBox[{"4", ";;", "5"}], "\[RightDoubleBracket]"}]}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"volume", " ", "=", " ", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\<tools\\\\et.v2\\\\data\\\\scoba12_small\\\\noPruned\\\\scoba12_small.\
ply\>\"", ",", "\"\<Graphics3D\>\""}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"volume", " ", "=", " ", 
     RowBox[{"Import", "[", 
      RowBox[{
      "\"\<tools\\\\et.v2\\\\data\\\\scoba12\\\\scoba12.ply\>\"", ",", 
       "\"\<Graphics3D\>\""}], "]"}]}], ";"}], "*)"}]}]}], "Input",
 CellChangeTimes->{
  3.853411316630581*^9, 3.8534114597216773`*^9, {3.853411490823798*^9, 
   3.8534115580342665`*^9}, {3.853411854602112*^9, 3.853411919295912*^9}, {
   3.8534119528158073`*^9, 3.853411965879448*^9}, {3.8534120039561195`*^9, 
   3.8534120192461653`*^9}, {3.853412067335616*^9, 3.8534120761319904`*^9}, {
   3.853412140472084*^9, 3.853412215631686*^9}, {3.8534125669220486`*^9, 
   3.8534125720810385`*^9}, {3.853412739798766*^9, 3.8534127465802946`*^9}, {
   3.853412840210681*^9, 3.8534128657770376`*^9}, {3.853412901374797*^9, 
   3.853412989420848*^9}, {3.85341316128904*^9, 3.853413182227874*^9}, {
   3.853413578780821*^9, 3.8534135851869183`*^9}, 3.853413823418873*^9, {
   3.8534142796923046`*^9, 3.8534142836078253`*^9}, 3.8534144066771054`*^9, {
   3.8534172149532237`*^9, 3.853417271500305*^9}, {3.8534504039272327`*^9, 
   3.8534504153992834`*^9}, {3.853451177834361*^9, 3.853451184252537*^9}, {
   3.8535087001962357`*^9, 3.85350870175027*^9}, {3.853508865167531*^9, 
   3.853508881569626*^9}, {3.853508927846984*^9, 3.853509019274604*^9}, {
   3.8535098192581654`*^9, 3.853509820004002*^9}, {3.853510080141359*^9, 
   3.8535100815058126`*^9}, {3.853515918857011*^9, 3.85351593828321*^9}, {
   3.85351603545372*^9, 3.853516044557633*^9}, {3.8535160949752083`*^9, 
   3.8535160967972984`*^9}, {3.853516161844947*^9, 3.8535161756055894`*^9}, {
   3.8535162611061583`*^9, 3.853516280514905*^9}, {3.8535164910904493`*^9, 
   3.8535165186306467`*^9}, {3.853516724778865*^9, 3.8535167274395933`*^9}, 
   3.85384736483252*^9, {3.8538479822155123`*^9, 3.8538479873152447`*^9}, 
   3.8538484839277873`*^9, {3.8538936001974335`*^9, 3.8538936113397226`*^9}, 
   3.8541157792613506`*^9, 3.854115820150979*^9},
 CellLabel->
  "In[309]:=",ExpressionUUID->"cab7a922-8b6d-421e-9d0c-02d9685c466a"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Draw Ground Truth", "Section",
 CellChangeTimes->{{3.853413807296649*^9, 3.853413809561347*^9}, {
  3.8534151383878555`*^9, 3.8534151400030766`*^9}, {3.8539746106904435`*^9, 
  3.8539746156345477`*^9}},ExpressionUUID->"df6b94cc-c81d-4d93-b9cd-\
1b89be1877ce"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Dimensions", "[", "data", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"balls", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"Red", ",", 
       RowBox[{"Opacity", "[", "0.5", "]"}], ",", 
       RowBox[{"Sphere", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"data", "[", 
            RowBox[{"[", 
             RowBox[{"i", ",", "1"}], "]"}], "]"}], ",", 
           RowBox[{"data", "[", 
            RowBox[{"[", 
             RowBox[{"i", ",", "2"}], "]"}], "]"}], ",", 
           RowBox[{"data", "[", 
            RowBox[{"[", 
             RowBox[{"i", ",", "3"}], "]"}], "]"}]}], "}"}], ",", 
         RowBox[{"data", "[", 
          RowBox[{"[", 
           RowBox[{"i", ",", "5"}], "]"}], "]"}]}], "]"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "2", ",", 
       RowBox[{
        RowBox[{"Dimensions", "[", "data", "]"}], "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"primitives", "=", 
   RowBox[{"Graphics3D", "[", 
    RowBox[{"balls", ",", 
     RowBox[{"Axes", "\[Rule]", "True"}], ",", 
     RowBox[{"PlotRange", "\[RightArrow]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"1", ",", "150"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "150"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"1", ",", "150"}], "}"}]}], "}"}]}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{"primitives", ",", "volume"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Show", "[", "skeleton", "]"}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.8534138375248003`*^9, 3.8534140247760954`*^9}, {
   3.8534140749914894`*^9, 3.85341411265799*^9}, {3.8534141567900124`*^9, 
   3.8534142155325212`*^9}, {3.8534142625797286`*^9, 
   3.8534143749815793`*^9}, {3.853414420453625*^9, 3.853414539409275*^9}, {
   3.8534151423357053`*^9, 3.8534152677556677`*^9}, {3.8534153881798325`*^9, 
   3.8534154554596367`*^9}, {3.8534154917402425`*^9, 
   3.8534154948271084`*^9}, {3.8534155658288317`*^9, 
   3.8534155752439966`*^9}, {3.8534156354975853`*^9, 3.853415636668643*^9}, {
   3.8534156814774947`*^9, 3.8534157464086685`*^9}, {3.853415779557153*^9, 
   3.85341583301439*^9}, {3.8534158670818176`*^9, 3.853415870911824*^9}, {
   3.853416134718137*^9, 3.8534162726924725`*^9}, {3.8534163305810194`*^9, 
   3.853416392436844*^9}, {3.8534164693567457`*^9, 3.8534164817325783`*^9}, {
   3.853417286380561*^9, 3.8534173227686357`*^9}, {3.8534503354005995`*^9, 
   3.8534503858331947`*^9}, {3.8534504369110527`*^9, 3.853450476050764*^9}, {
   3.8534505599139023`*^9, 3.8534505701555243`*^9}, {3.853450707633499*^9, 
   3.853450725376719*^9}, {3.853450961214613*^9, 3.853450979508601*^9}, {
   3.8534511488416686`*^9, 3.853451149334306*^9}, 3.8535090611325245`*^9, {
   3.8535091014938555`*^9, 3.853509173964754*^9}, {3.8535092369698176`*^9, 
   3.853509239313857*^9}, {3.8535093066271935`*^9, 3.853509365879882*^9}, {
   3.8535094362123694`*^9, 3.8535094406096735`*^9}, {3.853509476385706*^9, 
   3.8535094780271034`*^9}, {3.8535095218959007`*^9, 
   3.8535095269354506`*^9}, {3.8535096022985563`*^9, 
   3.8535096024840765`*^9}, {3.8535161843692703`*^9, 3.853516188845687*^9}, {
   3.8535163015454063`*^9, 3.8535163018900337`*^9}, 3.8538478768832936`*^9},
 CellLabel->"In[9]:=",ExpressionUUID->"f15d14cb-b070-496b-ae20-c8c43508c7c9"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"MeshCells", "[", 
    RowBox[{"volume", ",", "2"}], "]"}], "\[LeftDoubleBracket]", 
   RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}], "*)"}]], "Input",
 CellChangeTimes->{{3.853509833600406*^9, 3.8535099145497627`*^9}, {
   3.8535100388535347`*^9, 3.8535100689933023`*^9}, {3.853510129928356*^9, 
   3.8535101392573814`*^9}, 
   3.85351594915317*^9},ExpressionUUID->"5ce3981c-1afc-4ef0-b1f4-\
2e09d2bfbf23"]
}, Closed]],

Cell[CellGroupData[{

Cell["Recover 3D Volume from Skeleton", "Section",
 CellChangeTimes->{{3.8538479022742853`*^9, 3.853847934299*^9}, 
   3.854112885598358*^9},ExpressionUUID->"83e7fb8a-5c09-4abc-8a76-\
16523fa8af48"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"skeletonMesh", "=", 
   RowBox[{
   "Import", "[", 
    "\"\<tools\\\\et.v2\\\\data\\\\scoba12_small\\\\noPruned\\\\scoba12_small_\
skel_0.1.ply\>\"", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"extensionData", "=", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\<tools\\\\et.v2\\\\data\\\\scoba12_small\\\\noPruned\\\\scoba12_small_\
skel_0.1.ply\>\"", ",", "\"\<UserExtensions\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"radius", "=", 
    RowBox[{"extensionData", "\[LeftDoubleBracket]", 
     RowBox[{"2", ",", "2", ",", ";;"}], "\[RightDoubleBracket]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"points", " ", "=", " ", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\<tools\\\\et.v2\\\\data\\\\scoba12_small\\\\noPruned\\\\scoba12_small_\
skel_0.1.ply\>\"", ",", "\"\<VertexData\>\""}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{"points", "\[LeftDoubleBracket]", 
      RowBox[{";;", ",", "1"}], "\[RightDoubleBracket]"}], "+=", "55.5"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"points", "\[LeftDoubleBracket]", 
      RowBox[{";;", ",", "2"}], "\[RightDoubleBracket]"}], "+=", "58.5"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"points", "\[LeftDoubleBracket]", 
      RowBox[{";;", ",", "3"}], "\[RightDoubleBracket]"}], "+=", "70.5"}], 
    ";"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"lines", " ", "=", " ", 
  RowBox[{"Import", "[", 
   RowBox[{
   "\"\<tools\\\\et.v2\\\\data\\\\scoba12_small\\\\noPruned\\\\scoba12_small_\
skel_0.1.ply\>\"", ",", "\"\<LineData\>\""}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"recoverData", "=", 
   RowBox[{"Transpose", "[", 
    RowBox[{"{", 
     RowBox[{"radius", ",", 
      RowBox[{"points", "\[LeftDoubleBracket]", 
       RowBox[{";;", ",", "1"}], "\[RightDoubleBracket]"}], ",", 
      RowBox[{"points", "\[LeftDoubleBracket]", 
       RowBox[{";;", ",", "2"}], "\[RightDoubleBracket]"}], ",", 
      RowBox[{"points", "\[LeftDoubleBracket]", 
       RowBox[{";;", ",", "3"}], "\[RightDoubleBracket]"}]}], "}"}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"MeshCells", "[", "skele", "]"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{
    RowBox[{"Dimensions", "[", "radius", "]"}], ",", 
    RowBox[{"Dimensions", "[", "points", "]"}], ",", 
    RowBox[{"Dimensions", "[", "lines", "]"}], ",", 
    RowBox[{"Dimensions", "[", "recoverData", "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", "radius"}], "Input",
 CellChangeTimes->{{3.853847996073344*^9, 3.8538480666471415`*^9}, {
   3.85384814759066*^9, 3.8538481790270996`*^9}, {3.8538482208282127`*^9, 
   3.8538482498324275`*^9}, {3.853848322198082*^9, 3.8538483421938705`*^9}, {
   3.853848464083454*^9, 3.853848466592469*^9}, {3.8538485624211645`*^9, 
   3.8538486301080403`*^9}, {3.8538493936151357`*^9, 
   3.8538494012017193`*^9}, {3.8538497582105923`*^9, 
   3.8538497649219575`*^9}, {3.8538503537540164`*^9, 
   3.8538503610276475`*^9}, {3.853850391997448*^9, 3.853850413767375*^9}, {
   3.8538505758586707`*^9, 3.853850686916012*^9}, {3.853850737454007*^9, 
   3.853850738028795*^9}, {3.853883900824424*^9, 3.8538839517218933`*^9}, {
   3.853884034965886*^9, 3.8538841031622744`*^9}, {3.853884290676021*^9, 
   3.8538842967218943`*^9}, {3.8538844678230553`*^9, 
   3.8538845438497505`*^9}, {3.853884775951578*^9, 3.853884953011486*^9}, 
   3.853885588833227*^9, {3.853886147592149*^9, 3.8538862184575233`*^9}, {
   3.853886293795274*^9, 3.853886337805868*^9}, {3.853886367880432*^9, 
   3.8538864923402557`*^9}, {3.8538866021290426`*^9, 3.853886648742202*^9}, {
   3.853886695765098*^9, 3.853886696043353*^9}, {3.853886727561042*^9, 
   3.853886741325066*^9}, 3.853886778923636*^9, {3.8538869768020067`*^9, 
   3.853887063991726*^9}, {3.85388709977031*^9, 3.853887137319914*^9}, 
   3.8538929047876697`*^9, {3.8539749723838234`*^9, 3.8539749807454367`*^9}, {
   3.8541151220047593`*^9, 3.8541151296718817`*^9}, 3.8541152218484554`*^9, {
   3.854115350554254*^9, 3.854115352880249*^9}, 3.854115812736826*^9, {
   3.854116076243925*^9, 3.8541160867500424`*^9}, 3.8541168127851343`*^9, {
   3.8547273510884676`*^9, 
   3.8547273566393285`*^9}},ExpressionUUID->"345ee2aa-0321-4daf-ad3b-\
ea884f65b0ea"],

Cell[CellGroupData[{

Cell["max and min coordinates of skeleton", "Subsubsection",
 CellChangeTimes->{{3.8538947035609913`*^9, 
  3.8538947145589767`*^9}},ExpressionUUID->"ea92828c-2b86-474f-b702-\
374766e147c9"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"xMaxSkel", "=", 
   RowBox[{"Max", "[", 
    RowBox[{"recoverData", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "2"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"xMinSkel", "=", 
   RowBox[{"Min", "[", 
    RowBox[{"recoverData", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "2"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"yMaxSkel", "=", 
   RowBox[{"Max", "[", 
    RowBox[{"recoverData", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "3"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"yMinSkel", "=", 
   RowBox[{"Min", "[", 
    RowBox[{"recoverData", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "3"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"zMaxSkel", "=", 
   RowBox[{"Max", "[", 
    RowBox[{"recoverData", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "4"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"zMinSkel", "=", 
   RowBox[{"Min", "[", 
    RowBox[{"recoverData", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "4"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{
   "xMaxSkel", ",", "\"\< \>\"", ",", "xMinSkel", ",", "\"\< \>\"", ",", 
    "yMaxSkel", ",", "\"\< \>\"", ",", "yMinSkel", ",", "\"\< \>\"", ",", 
    "zMaxSkel", ",", "\"\< \>\"", ",", "zMinSkel"}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.8538946031367493`*^9, 3.8538946658975067`*^9}, {
  3.8538947884807844`*^9, 3.853894789717477*^9}, {3.853894903827134*^9, 
  3.85389492092133*^9}, {3.85389496292605*^9, 3.8538950166553297`*^9}},
 CellLabel->"In[99]:=",ExpressionUUID->"329284d9-1933-42f7-b738-a8a5b0fb7187"]
}, Open  ]],

Cell[CellGroupData[{

Cell["max and min coordinates of raw median axis", "Subsubsection",
 CellChangeTimes->{{3.8538947961430025`*^9, 
  3.853894812293893*^9}},ExpressionUUID->"f0e2ade6-1f23-4f8f-8cd9-\
d7bfd1507698"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"volumeVertice", " ", "=", " ", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\<tools\\\\et.v2\\\\data\\\\scoba12_small\\\\noPruned\\\\scoba12_small.\
ply\>\"", ",", "\"\<VertexData\>\""}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"xMaxMA", "=", 
   RowBox[{"Max", "[", 
    RowBox[{"volumeVertice", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "1"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"xMinMA", "=", 
   RowBox[{"Min", "[", 
    RowBox[{"volumeVertice", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "1"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"yMaxMA", "=", 
   RowBox[{"Max", "[", 
    RowBox[{"volumeVertice", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "2"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"yMinMA", "=", 
   RowBox[{"Min", "[", 
    RowBox[{"volumeVertice", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "2"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"zMaxMA", "=", 
   RowBox[{"Max", "[", 
    RowBox[{"volumeVertice", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "3"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"zMinMA", "=", 
   RowBox[{"Min", "[", 
    RowBox[{"volumeVertice", "\[LeftDoubleBracket]", 
     RowBox[{";;", ",", "3"}], "\[RightDoubleBracket]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Print", "[", 
   RowBox[{
   "xMaxMA", ",", "\"\< \>\"", ",", "xMinMA", ",", "\"\< \>\"", ",", "yMaxMA",
     ",", "\"\< \>\"", ",", "yMinMA", ",", "\"\< \>\"", ",", "zMaxMA", ",", 
    "\"\< \>\"", ",", "zMinMA"}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.85389482466193*^9, 3.8538948761702595`*^9}, {
  3.8538949256859183`*^9, 3.8538949506253834`*^9}, {3.8538950208286705`*^9, 
  3.8538950364255686`*^9}, {3.853895466129089*^9, 
  3.8538954801685133`*^9}},ExpressionUUID->"0bf378ec-d78a-4837-a7b1-\
4578a32b0f9f"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Visualize recovered volume", "Subsubsection",
 CellChangeTimes->{{3.853895536499998*^9, 3.853895549626212*^9}, {
  3.8538956878160515`*^9, 
  3.85389568904607*^9}},ExpressionUUID->"67078184-d07b-4892-a441-\
cd175e94e18d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"erosionBalls", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Opacity", "[", "0.3", "]"}], ",", 
       RowBox[{"Ball", "[", 
        RowBox[{
         RowBox[{"recoverData", "\[LeftDoubleBracket]", 
          RowBox[{"i", ",", 
           RowBox[{"2", ";;", "4"}]}], "\[RightDoubleBracket]"}], ",", 
         RowBox[{"recoverData", "\[LeftDoubleBracket]", 
          RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}]}], "]"}]}], 
      "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", 
       RowBox[{
        RowBox[{"Dimensions", "[", "recoverData", "]"}], 
        "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], "}"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{
   RowBox[{"Graphics3D", "[", 
    RowBox[{"erosionBalls", ",", 
     RowBox[{"Axes", "\[Rule]", "True"}]}], "]"}], ",", "volume"}], 
  "]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.854115466863083*^9, 3.8541155049913254`*^9}},
 CellLabel->
  "In[258]:=",ExpressionUUID->"28225e42-8750-4a3c-bde0-4b6a315637c7"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Simple case", "Section",
 CellChangeTimes->{{3.8539492170970554`*^9, 
  3.8539492246742196`*^9}},ExpressionUUID->"5c5dfd5b-437e-45e7-98f8-\
4e7cff62c612"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"skelGraph", "=", 
   RowBox[{"Graph", "[", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"lines", "\[LeftDoubleBracket]", 
        RowBox[{"i", ",", "1"}], "\[RightDoubleBracket]"}], 
       "\[UndirectedEdge]", 
       RowBox[{"lines", "\[LeftDoubleBracket]", 
        RowBox[{"i", ",", "2"}], "\[RightDoubleBracket]"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{
         RowBox[{"Dimensions", "[", "lines", "]"}], "\[LeftDoubleBracket]", 
         "1", "\[RightDoubleBracket]"}]}], "}"}]}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"skelGraphics", "=", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\<tools\\\\et.v2\\\\data\\\\scoba12_small\\\\noPruned\\\\scoba12_small_\
skel_0.1.ply\>\"", ",", "\"\<Graphics3D\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"connect", "=", 
  RowBox[{"AdjacencyList", "[", "skelGraph", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"junctions", ":=", 
  RowBox[{"Function", "[", 
   RowBox[{
    RowBox[{"{", "graph", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"connect", "=", 
      RowBox[{"AdjacencyList", "[", "graph", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ans", "=", 
      RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"For", "[", 
      RowBox[{
       RowBox[{"i", "=", "1"}], ",", 
       RowBox[{"i", "\[LessEqual]", 
        RowBox[{
         RowBox[{"Dimensions", "[", "connect", "]"}], "\[LeftDoubleBracket]", 
         "1", "\[RightDoubleBracket]"}]}], ",", 
       RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", 
           RowBox[{
           "connect", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
           "]"}], ">", "2"}], ",", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"ans", ",", "i"}], "]"}]}], "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "ans"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"nodes", "=", 
   RowBox[{"junctions", "[", "skelGraph", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Dimensions", "[", "nodes", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"junctionBalls", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Opacity", "[", "1", "]"}], ",", 
       RowBox[{"Ball", "[", 
        RowBox[{
         RowBox[{"recoverData", "\[LeftDoubleBracket]", 
          RowBox[{
           RowBox[{
           "nodes", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
           ",", 
           RowBox[{"2", ";;", "4"}]}], "\[RightDoubleBracket]"}], ",", 
         RowBox[{"radius", "\[LeftDoubleBracket]", 
          RowBox[{
          "nodes", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}], 
          "\[RightDoubleBracket]"}]}], "]"}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", 
       RowBox[{
        RowBox[{"Dimensions", "[", "nodes", "]"}], "\[LeftDoubleBracket]", 
        "1", "\[RightDoubleBracket]"}]}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{
   RowBox[{"Graphics3D", "[", 
    RowBox[{
     RowBox[{"{", "junctionBalls", "}"}], ",", 
     RowBox[{"Axes", "\[Rule]", "True"}]}], "]"}], ",", "skelGraphics"}], 
  "]"}]}], "Input",
 CellChangeTimes->{{3.8539492257387085`*^9, 3.853949327986766*^9}, {
   3.8539493624448843`*^9, 3.8539493824220524`*^9}, {3.8539494634313793`*^9, 
   3.853949465480194*^9}, {3.8539495717263308`*^9, 3.853949573341322*^9}, {
   3.8539496907050276`*^9, 3.8539496920684304`*^9}, {3.8539498697195973`*^9, 
   3.853949877222818*^9}, {3.8539501599313006`*^9, 3.8539502593438206`*^9}, 
   3.853950293944786*^9, {3.853950596569739*^9, 3.8539506414711847`*^9}, {
   3.853950983675438*^9, 3.8539510216734257`*^9}, {3.853951069833064*^9, 
   3.8539510776680393`*^9}, {3.8539512796063433`*^9, 
   3.8539512943935423`*^9}, {3.8539513504842296`*^9, 
   3.8539513562094383`*^9}, {3.853955743902728*^9, 3.853955750628419*^9}, {
   3.853955970746291*^9, 3.853955999253091*^9}, {3.8539562788750687`*^9, 
   3.8539562947358294`*^9}, {3.853956325996825*^9, 3.8539563738198195`*^9}, {
   3.853956716547615*^9, 3.8539567321025505`*^9}, {3.8539568370851717`*^9, 
   3.853957018460184*^9}, {3.8539571180254345`*^9, 3.8539571181330996`*^9}, {
   3.8539571871529336`*^9, 3.853957381955117*^9}, {3.8539576862946367`*^9, 
   3.853957686954123*^9}, {3.853957768233821*^9, 3.853957897338476*^9}, {
   3.8539580543196073`*^9, 3.853958092949871*^9}, 3.85395813204967*^9, {
   3.8539585461272793`*^9, 3.853958547771629*^9}, {3.853958666928522*^9, 
   3.853958703539002*^9}, {3.8539587576711073`*^9, 3.8539587604227133`*^9}, {
   3.8539703984545507`*^9, 3.853970400034309*^9}, {3.853970439300308*^9, 
   3.853970484618403*^9}, 3.853971966899876*^9, {3.853972010649722*^9, 
   3.8539720116440125`*^9}, {3.853972218960747*^9, 3.8539724221309175`*^9}, {
   3.8539724924225073`*^9, 3.8539725087141743`*^9}, 3.853972580824142*^9, {
   3.853972767966406*^9, 3.853972775632962*^9}, 3.853973022327656*^9, {
   3.853973206248369*^9, 3.8539732589628906`*^9}, {3.8539732906508975`*^9, 
   3.8539732912768354`*^9}, {3.8539734529331937`*^9, 3.853973543174277*^9}, 
   3.8539736285346107`*^9, {3.8539736779214745`*^9, 3.853973931859868*^9}, 
   3.853974085429265*^9, {3.8539741822453156`*^9, 3.853974313082901*^9}, {
   3.853974377248958*^9, 3.85397441408466*^9}, {3.853974552379451*^9, 
   3.8539745830278645`*^9}, {3.853974715804872*^9, 3.8539747288064375`*^9}, {
   3.853975084313883*^9, 3.85397508621611*^9}, {3.8539752476248198`*^9, 
   3.853975288075383*^9}, 3.8539753447269816`*^9, 3.8539753842769103`*^9, 
   3.853975437838048*^9, 3.8539755254735785`*^9, 3.8539770005900574`*^9, {
   3.8541129703875804`*^9, 3.8541129767058277`*^9}, {3.854114758151267*^9, 
   3.854114821931259*^9}, {3.8541157974952393`*^9, 3.8541157992527027`*^9}, {
   3.8541158746550713`*^9, 3.8541159160272026`*^9}, {3.854116018462943*^9, 
   3.8541160312028418`*^9}, {3.8541161210408273`*^9, 
   3.8541161214437084`*^9}, {3.8541161990857315`*^9, 
   3.8541162397552085`*^9}, {3.854116283202408*^9, 3.8541162982318325`*^9}, {
   3.854116347582574*^9, 3.854116375409328*^9}, 3.8541167082256527`*^9, {
   3.8541170853789606`*^9, 3.854117088651016*^9}, {3.8541171528347836`*^9, 
   3.854117154554719*^9}, {3.8541174147850776`*^9, 
   3.8541174316273203`*^9}},ExpressionUUID->"b64bd17d-e1ed-4712-8ed7-\
167d5ba78bd3"],

Cell[BoxData[
 RowBox[{"connect", "\[LeftDoubleBracket]", "524", 
  "\[RightDoubleBracket]"}]], "Input",
 CellChangeTimes->{{3.853975407680399*^9, 3.8539754192512264`*^9}, {
  3.8539754648459234`*^9, 3.853975465118161*^9}},
 CellLabel->
  "In[419]:=",ExpressionUUID->"6885c842-feaa-420b-a6bf-214c84b593f8"]
}, Open  ]]
},
WindowSize->{1920, 997},
WindowMargins->{{-8, Automatic}, {Automatic, 0}},
Magnification:>1.7 Inherited,
FrontEndVersion->"12.0 for Microsoft Windows (64-bit) (2019\:5e745\:670818\
\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 166, 3, 114, "Section",ExpressionUUID->"3285aa9e-73a8-4a7b-a1bc-0333efd5a34a"],
Cell[749, 27, 315, 5, 49, "Input",ExpressionUUID->"a8590c15-c792-458a-9488-5573a1e80a66"]
}, Open  ]],
Cell[CellGroupData[{
Cell[1101, 37, 198, 3, 114, "Section",ExpressionUUID->"78e0aa33-9652-41df-b7ed-0f47c926405d"],
Cell[1302, 42, 3922, 84, 248, "Input",ExpressionUUID->"cab7a922-8b6d-421e-9d0c-02d9685c466a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5261, 131, 265, 4, 114, "Section",ExpressionUUID->"df6b94cc-c81d-4d93-b9cd-1b89be1877ce"],
Cell[5529, 137, 3538, 76, 182, "Input",ExpressionUUID->"f15d14cb-b070-496b-ae20-c8c43508c7c9"],
Cell[9070, 215, 465, 10, 49, "Input",ExpressionUUID->"5ce3981c-1afc-4ef0-b1f4-2e09d2bfbf23"]
}, Closed]],
Cell[CellGroupData[{
Cell[9572, 230, 198, 3, 87, "Section",ExpressionUUID->"83e7fb8a-5c09-4abc-8a76-16523fa8af48"],
Cell[9773, 235, 4417, 93, 446, "Input",ExpressionUUID->"345ee2aa-0321-4daf-ad3b-ea884f65b0ea"],
Cell[CellGroupData[{
Cell[14215, 332, 190, 3, 74, "Subsubsection",ExpressionUUID->"ea92828c-2b86-474f-b702-374766e147c9"],
Cell[14408, 337, 1873, 46, 248, "Input",ExpressionUUID->"329284d9-1933-42f7-b738-a8a5b0fb7187"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16318, 388, 195, 3, 74, "Subsubsection",ExpressionUUID->"f0e2ade6-1f23-4f8f-8cd9-d7bfd1507698"],
Cell[16516, 393, 2099, 53, 281, "Input",ExpressionUUID->"0bf378ec-d78a-4837-a7b1-4578a32b0f9f"]
}, Open  ]],
Cell[CellGroupData[{
Cell[18652, 451, 227, 4, 74, "Subsubsection",ExpressionUUID->"67078184-d07b-4892-a441-cd175e94e18d"],
Cell[18882, 457, 1134, 30, 116, "Input",ExpressionUUID->"28225e42-8750-4a3c-bde0-4b6a315637c7"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[20065, 493, 160, 3, 114, "Section",ExpressionUUID->"5c5dfd5b-437e-45e7-98f8-4e7cff62c612"],
Cell[20228, 498, 6534, 135, 446, "Input",ExpressionUUID->"b64bd17d-e1ed-4712-8ed7-167d5ba78bd3"],
Cell[26765, 635, 306, 6, 49, "Input",ExpressionUUID->"6885c842-feaa-420b-a6bf-214c84b593f8"]
}, Open  ]]
}
]
*)

